{% extends 'polls/base.html' %}

{% block content %}
<div class="card">
    <h2 style="margin-top: 0;">Профиль пользователя {{ user.username }}</h2>

    {% if user_profile.avatar %}
        <div style="text-align: center; margin-bottom: 20px;">
            <img src="{{ user_profile.avatar.url }}" class="avatar-img" alt="Аватар">
        </div>
    {% endif %}

    <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}

        <div class="card" style="background: #f8f9fa; margin-bottom: 20px;">
            <h3 style="margin-top: 0;">Основные данные</h3>
            {% for field in user_form %}
                <div style="margin-bottom: 15px;">
                    <label style="display: block; font-weight: bold; margin-bottom: 5px;">
                        {{ field.label }}
                    </label>
                    {{ field }}
                </div>
            {% endfor %}
        </div>

        <div class="card" style="background: #f8f9fa; margin-bottom: 20px;">
            <h3 style="margin-top: 0;">Дополнительная информация</h3>
            {% for field in profile_form %}
                <div style="margin-bottom: 15px;">
                    <label style="display: block; font-weight: bold; margin-bottom: 5px;">
                        {{ field.label }}
                    </label>
                    {{ field }}
                </div>
            {% endfor %}
        </div>

        <div style="display: flex; gap: 10px;">
            <button type="submit" class="btn btn-success">Сохранить изменения</button>
            <a href="{% url 'polls:index' %}" class="btn btn-secondary">Отмена</a>
        </div>
    </form>
</div>

<div class="card" style="background: #f8d7da; border-color: #f5c6cb;">
    <h3 style="color: #721c24; margin-top: 0;">Опасная зона</h3>
    <p style="color: #721c24;">Удаление аккаунта нельзя отменить.</p>
    <a href="{% url 'polls:delete_profile' %}" class="btn" style="background: #dc3545;">Удалить профиль</a>
</div>
{% endblock %}