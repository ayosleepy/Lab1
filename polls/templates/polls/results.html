{% extends 'polls/base.html' %}

{% block content %}
<div class="card">
    <h2 style="margin-top: 0;">{{ question.question_text }}</h2>

    <div style="font-size: 14px; color: #666; margin-bottom: 20px;">
        <div>Всего голосов: <strong>{{ total_votes }}</strong></div>
        <div>Статус: {% if question.is_active %}Активен{% else %}Завершен{% endif %}</div>
    </div>

    <h3>Результаты:</h3>

    {% for choice_data in choices %}
        <div style="margin-bottom: 20px;">
            <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                <div>{{ choice_data.choice.choice_text }}</div>
                <div><strong>{{ choice_data.choice.votes }} голосов ({{ choice_data.percentage }}%)</strong></div>
            </div>

            <div style="background: #e9ecef; height: 20px; border-radius: 10px; overflow: hidden;">
                <div style="background: #007bff; height: 100%; width: {{ choice_data.percentage }}%;"></div>
            </div>
        </div>
    {% endfor %}

    <div style="margin-top: 30px; padding-top: 15px; border-top: 1px solid #dee2e6;">
        <a href="{% url 'polls:detail' question.id %}" class="btn">Вернуться к опросу</a>
        <a href="{% url 'polls:index' %}" class="btn btn-secondary">К списку опросов</a>
    </div>
</div>
{% endblock %}