{% extends 'polls/base.html' %}

{% block content %}
<h2>Профиль пользователя {{ user.username }}</h2>

{% if user_profile.avatar %}
    <div style="margin: 15px 0;">
        <p><strong>Текущий аватар:</strong></p>
        <img src="{{ user_profile.avatar.url }}" width="150" style="border-radius: 50%;">
    </div>
{% endif %}

<form method="POST" enctype="multipart/form-data" style="margin: 20px 0;">
    {% csrf_token %}

    <div style="background: #f5f5f5; padding: 15px; margin-bottom: 20px; border-radius: 5px;">
        <h3>Основные данные</h3>
        {{ user_form.as_p }}
    </div>

    <div style="background: #f5f5f5; padding: 15px; margin-bottom: 20px; border-radius: 5px;">
        <h3>Профиль</h3>
        {{ profile_form.as_p }}
    </div>

    <button type="submit" style="background: #4CAF50; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer;">
        Сохранить изменения
    </button>
    <a href="{% url 'polls:index' %}" style="padding: 10px 20px; margin-left: 10px;">Отмена</a>
</form>

<hr style="margin: 30px 0;">

<div style="background: #ffe6e6; padding: 15px; border-radius: 5px;">
    <h3 style="color: #b30000;">Удаление профиля</h3>
    <p>Внимание: это действие нельзя отменить.</p>
    <a href="{% url 'polls:delete_profile' %}" style="background: #b30000; color: white; padding: 10px 20px; text-decoration: none; border-radius: 4px; display: inline-block; margin-top: 10px;">
        Удалить профиль
    </a>
</div>

{% if messages %}
    <div style="margin-top: 20px;">
        {% for message in messages %}
            <div style="background: #d4edda; color: #155724; padding: 10px; border-radius: 4px; margin: 10px 0;">
                {{ message }}
            </div>
        {% endfor %}
    </div>
{% endif %}
{% endblock %}